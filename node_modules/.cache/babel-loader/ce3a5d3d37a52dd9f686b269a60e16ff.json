{"ast":null,"code":"var _jsxFileName = \"/Users/bedeko/dev/finervision_dev_test/client/src/Step2.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from 'react';\nimport { useForm } from 'react-hook-form';\nimport { useHistory } from 'react-router-dom';\nimport { useData } from \"./DataContext\";\nimport Joi from \"joi-browser\";\nimport { toast } from 'react-toastify';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const Step2 = () => {\n  _s();\n\n  const history = useHistory();\n  const {\n    setValues,\n    data\n  } = useData();\n  const {\n    register,\n    handleSubmit,\n    errors\n  } = useForm({\n    defaultValues: {\n      phone: data.phone,\n      gender: data.gender,\n      birth: data.birth\n    },\n    mode: \"onBlur\"\n  });\n  const schema = {\n    phone: Joi.number().min(10).required().label(\"Phone\"),\n    gender: Joi.string().alphanum().label(\"Gender\"),\n    birthday: Joi.date().min(1).max(31).label(\"Birth day\"),\n    birthmonth: Joi.date().min(1).max(12).label(\"Birth month\"),\n    birthyear: Joi.date().min(1900).max(2021).label(\"Birth year\")\n  };\n\n  const validate = usrData => {\n    const options = {\n      abortEarly: false\n    }; // let ifNo = {\n    //     isNumber:function(str) {\n    //         var pattern = /[^a-zA-Z]/g;\n    //         return pattern.test(str);\n    //     }\n    // }\n    // if (ifNo.isNumber(usrData.firstName)){\n    //     toast.error('Only text allowed')\n    //     return \n    // }\n\n    const result = Joi.validate(usrData, schema, options);\n    if (!result.error) return null;\n    let v_errors = {};\n\n    for (let item of result.error.details) {\n      v_errors[item.path[0]] = item.message;\n    }\n\n    return v_errors;\n  };\n\n  const onSubmit = data => {\n    let usrData = data;\n    let errors = validate(usrData);\n\n    if (errors) {\n      Object.values(errors).forEach(err => {\n        toast.error(err);\n        return;\n      });\n    } else {\n      setValues(data);\n      history.push(\"/step3\");\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Step 2: More comments\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSubmit(onSubmit),\n      children: [/*#__PURE__*/_jsxDEV(\"input\", { ...register('phone'),\n        name: \"phone\",\n        type: \"text\",\n        placeholder: \"Phone\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", { ...register('gender'),\n        name: \"gender\",\n        type: \"text\",\n        placeholder: \"Gender\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", { ...register('birthday'),\n        name: \"birthyear\",\n        type: \"number\",\n        placeholder: \"birth\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", { ...register('birthmonth'),\n        name: \"birthmonth\",\n        type: \"number\",\n        placeholder: \"birth\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", { ...register('birthyear'),\n        name: \"birthday\",\n        type: \"number\",\n        placeholder: \"birth\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        children: \"Next\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 69,\n    columnNumber: 9\n  }, this);\n};\n\n_s(Step2, \"1bvUjjG26Fks+l+PP9Rs9G9/ue4=\", false, function () {\n  return [useHistory, useData, useForm];\n});\n\n_c = Step2;\n\nvar _c;\n\n$RefreshReg$(_c, \"Step2\");","map":{"version":3,"sources":["/Users/bedeko/dev/finervision_dev_test/client/src/Step2.js"],"names":["React","useState","useForm","useHistory","useData","Joi","toast","Step2","history","setValues","data","register","handleSubmit","errors","defaultValues","phone","gender","birth","mode","schema","number","min","required","label","string","alphanum","birthday","date","max","birthmonth","birthyear","validate","usrData","options","abortEarly","result","error","v_errors","item","details","path","message","onSubmit","Object","values","forEach","err","push"],"mappings":";;;AAAA,OAAOA,KAAP,IAAiBC,QAAjB,QAAiC,OAAjC;AACA,SAASC,OAAT,QAAwB,iBAAxB;AACA,SAASC,UAAT,QAA2B,kBAA3B;AACA,SAASC,OAAT,QAAwB,eAAxB;AAEA,OAAOC,GAAP,MAAgB,aAAhB;AACA,SAASC,KAAT,QAAsB,gBAAtB;;AAEA,OAAO,MAAMC,KAAK,GAAG,MAAM;AAAA;;AAE3B,QAAMC,OAAO,GAAGL,UAAU,EAA1B;AAEA,QAAM;AAAEM,IAAAA,SAAF;AAAaC,IAAAA;AAAb,MAAsBN,OAAO,EAAnC;AAEA,QAAM;AAAEO,IAAAA,QAAF;AAAYC,IAAAA,YAAZ;AAA0BC,IAAAA;AAA1B,MAAqCX,OAAO,CAAC;AAC/CY,IAAAA,aAAa,EAAE;AACXC,MAAAA,KAAK,EAAEL,IAAI,CAACK,KADD;AAEXC,MAAAA,MAAM,EAAEN,IAAI,CAACM,MAFF;AAGXC,MAAAA,KAAK,EAAEP,IAAI,CAACO;AAHD,KADgC;AAM/CC,IAAAA,IAAI,EAAE;AANyC,GAAD,CAAlD;AASA,QAAMC,MAAM,GAAG;AACXJ,IAAAA,KAAK,EAAEV,GAAG,CAACe,MAAJ,GAAaC,GAAb,CAAiB,EAAjB,EAAqBC,QAArB,GAAgCC,KAAhC,CAAsC,OAAtC,CADI;AAEXP,IAAAA,MAAM,EAAEX,GAAG,CAACmB,MAAJ,GAAaC,QAAb,GAAwBF,KAAxB,CAA8B,QAA9B,CAFG;AAGXG,IAAAA,QAAQ,EAAErB,GAAG,CAACsB,IAAJ,GAAWN,GAAX,CAAe,CAAf,EAAkBO,GAAlB,CAAsB,EAAtB,EAA0BL,KAA1B,CAAgC,WAAhC,CAHC;AAIXM,IAAAA,UAAU,EAAExB,GAAG,CAACsB,IAAJ,GAAWN,GAAX,CAAe,CAAf,EAAkBO,GAAlB,CAAsB,EAAtB,EAA0BL,KAA1B,CAAgC,aAAhC,CAJD;AAKXO,IAAAA,SAAS,EAAEzB,GAAG,CAACsB,IAAJ,GAAWN,GAAX,CAAe,IAAf,EAAqBO,GAArB,CAAyB,IAAzB,EAA+BL,KAA/B,CAAqC,YAArC;AALA,GAAf;;AAOA,QAAMQ,QAAQ,GAAIC,OAAD,IAAa;AAC1B,UAAMC,OAAO,GAAG;AAAEC,MAAAA,UAAU,EAAE;AAAd,KAAhB,CAD0B,CAE1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,UAAMC,MAAM,GAAG9B,GAAG,CAAC0B,QAAJ,CAAaC,OAAb,EAAsBb,MAAtB,EAA8Bc,OAA9B,CAAf;AACA,QAAI,CAACE,MAAM,CAACC,KAAZ,EAAmB,OAAO,IAAP;AAEnB,QAAIC,QAAQ,GAAG,EAAf;;AACA,SAAK,IAAIC,IAAT,IAAiBH,MAAM,CAACC,KAAP,CAAaG,OAA9B,EAAuC;AACnCF,MAAAA,QAAQ,CAACC,IAAI,CAACE,IAAL,CAAU,CAAV,CAAD,CAAR,GAAyBF,IAAI,CAACG,OAA9B;AACH;;AACD,WAAOJ,QAAP;AACH,GArBD;;AAuBA,QAAMK,QAAQ,GAAIhC,IAAD,IAAU;AACvB,QAAIsB,OAAO,GAAGtB,IAAd;AACA,QAAIG,MAAM,GAAGkB,QAAQ,CAACC,OAAD,CAArB;;AACA,QAAInB,MAAJ,EAAY;AACR8B,MAAAA,MAAM,CAACC,MAAP,CAAc/B,MAAd,EAAsBgC,OAAtB,CAA8BC,GAAG,IAAI;AACjCxC,QAAAA,KAAK,CAAC8B,KAAN,CAAYU,GAAZ;AACA;AACH,OAHD;AAIH,KALD,MAKO;AACHrC,MAAAA,SAAS,CAACC,IAAD,CAAT;AACAF,MAAAA,OAAO,CAACuC,IAAR,CAAa,QAAb;AACH;AACJ,GAZD;;AAcI,sBACI;AAAA,4BACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YADJ,eAEA;AAAM,MAAA,QAAQ,EAAEnC,YAAY,CAAC8B,QAAD,CAA5B;AAAA,8BACI,sBAAW/B,QAAQ,CAAC,OAAD,CAAnB;AAA8B,QAAA,IAAI,EAAC,OAAnC;AAA2C,QAAA,IAAI,EAAC,MAAhD;AAAuD,QAAA,WAAW,EAAC;AAAnE;AAAA;AAAA;AAAA;AAAA,cADJ,eAEI,sBAAWA,QAAQ,CAAC,QAAD,CAAnB;AAA+B,QAAA,IAAI,EAAC,QAApC;AAA6C,QAAA,IAAI,EAAC,MAAlD;AAAyD,QAAA,WAAW,EAAC;AAArE;AAAA;AAAA;AAAA;AAAA,cAFJ,eAGI,sBAAWA,QAAQ,CAAC,UAAD,CAAnB;AAAiC,QAAA,IAAI,EAAC,WAAtC;AAAkD,QAAA,IAAI,EAAC,QAAvD;AAAgE,QAAA,WAAW,EAAC;AAA5E;AAAA;AAAA;AAAA;AAAA,cAHJ,eAII,sBAAWA,QAAQ,CAAC,YAAD,CAAnB;AAAmC,QAAA,IAAI,EAAC,YAAxC;AAAqD,QAAA,IAAI,EAAC,QAA1D;AAAmE,QAAA,WAAW,EAAC;AAA/E;AAAA;AAAA;AAAA;AAAA,cAJJ,eAKI,sBAAWA,QAAQ,CAAC,WAAD,CAAnB;AAAkC,QAAA,IAAI,EAAC,UAAvC;AAAkD,QAAA,IAAI,EAAC,QAAvD;AAAgE,QAAA,WAAW,EAAC;AAA5E;AAAA;AAAA;AAAA;AAAA,cALJ,eAMI;AAAQ,QAAA,IAAI,EAAC,QAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cANJ;AAAA;AAAA;AAAA;AAAA;AAAA,YAFA;AAAA;AAAA;AAAA;AAAA;AAAA,UADJ;AAaH,CAxEM;;GAAMJ,K;UAEGJ,U,EAEYC,O,EAEeF,O;;;KAN9BK,K","sourcesContent":["import React,  { useState } from 'react';\nimport { useForm } from 'react-hook-form';\nimport { useHistory } from 'react-router-dom';\nimport { useData } from \"./DataContext\";\n\nimport Joi from \"joi-browser\";\nimport { toast } from 'react-toastify';\n\nexport const Step2 = () => {\n\nconst history = useHistory();\n\nconst { setValues, data } = useData();\n\nconst { register, handleSubmit, errors } = useForm({\n    defaultValues: { \n        phone: data.phone,\n        gender: data.gender,\n        birth: data.birth\n     },\n    mode: \"onBlur\",\n});\n\nconst schema = {\n    phone: Joi.number().min(10).required().label(\"Phone\"),\n    gender: Joi.string().alphanum().label(\"Gender\"),\n    birthday: Joi.date().min(1).max(31).label(\"Birth day\"),\n    birthmonth: Joi.date().min(1).max(12).label(\"Birth month\"),\n    birthyear: Joi.date().min(1900).max(2021).label(\"Birth year\"),\n}\nconst validate = (usrData) => {\n    const options = { abortEarly: false };\n    // let ifNo = {\n    //     isNumber:function(str) {\n    //         var pattern = /[^a-zA-Z]/g;\n    //         return pattern.test(str);\n    //     }\n    // }\n    // if (ifNo.isNumber(usrData.firstName)){\n    //     toast.error('Only text allowed')\n    //     return \n    // }\n   \n    const result = Joi.validate(usrData, schema, options);\n    if (!result.error) return null;\n    \n    let v_errors = {};\n    for (let item of result.error.details) {\n        v_errors[item.path[0]] = item.message;\n    }\n    return v_errors;\n}\n\nconst onSubmit = (data) => {\n    let usrData = data\n    let errors = validate(usrData);\n    if (errors) {\n        Object.values(errors).forEach(err => {\n            toast.error(err)\n            return\n        })\n    } else {  \n        setValues(data)\n        history.push(\"/step3\")\n    }\n}\n\n    return (\n        <div>\n            <h2>Step 2: More comments</h2>\n        <form onSubmit={handleSubmit(onSubmit)}>\n            <input {...register('phone')} name=\"phone\" type=\"text\" placeholder=\"Phone\" />\n            <input {...register('gender')} name=\"gender\" type=\"text\" placeholder=\"Gender\" />\n            <input {...register('birthday')} name=\"birthyear\" type=\"number\" placeholder=\"birth\" />\n            <input {...register('birthmonth')} name=\"birthmonth\" type=\"number\" placeholder=\"birth\" />\n            <input {...register('birthyear')} name=\"birthday\" type=\"number\" placeholder=\"birth\" />\n            <button type=\"submit\">Next</button>\n        </form>\n        </div>\n    )\n}"]},"metadata":{},"sourceType":"module"}